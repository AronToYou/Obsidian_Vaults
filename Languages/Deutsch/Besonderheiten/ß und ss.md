Since the [1996 reform](https://de.wikipedia.org/wiki/Reform_der_deutschen_Rechtschreibung_von_1996), the rule is very simple:

Use an ß when following a long vowel (Maß, Spaß) ss when it follows a short vowel (Bass, Kasse, Essen) But only after splitting the word into morphemes*:

Essen is made up of the morphemes "ess" and "en". Aßen is formed by first splitting up the word according to its morphemes and then applying any ß-rules. The new morphemes are "Aß" (long vowel) and "en". Consider a word like Ausschusssitzung, which when split along it's morphemes (aus-schuss-sitz-ung) doesn't leave any double-s to be replaced. In the first case we have "ess", and in the second case we have "aus".

- Note that the morphemes aren't the same as the syllables: Consider words like zer-leg-en (or zer-le-gen). Morphemes are found by deconstructing the meaning of the word.